[build]
builder = "nixpacks"
buildCommand = """
apt-get update && \
apt-get install -y python3-dev build-essential && \
pip install --upgrade pip && \
pip install wheel && \
pip install -r requirements.txt
"""

[deploy]
startCommand = "gunicorn app:app"
healthcheckPath = "/health"
healthcheckTimeout = 100

[phases.setup]
aptPkgs = [
    "python3-dev",
    "default-libmysqlclient-dev",
    "pkg-config",
    "build-essential",
    "libpq-dev",
    "python3-numpy"
]
