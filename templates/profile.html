{% extends "base.html" %}

{% block title %}{{ get_text('profile') }}{% endblock %}

{% block content %}
<div class="profile-container">
    {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="flash-messages">
      {% for category, message in messages %}
        <p class="{{ category }}">{{ message }}</p>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}
    <div class="profile-box">
        <h2 style="color: rgb(191, 89, 30); margin-bottom: 20px;">
            ðŸŒ¾ {{ get_text('welcome user', user['full_name'] if user else 'Guest') }} ðŸŒ¾
        </h2>

        <div class="profile-details">
            <p><strong>{{ get_text('username') }}:</strong> {{ user['username'] }}</p>
            <p><strong>{{ get_text('phone number') }}:</strong> {{ user['phone_number'] }}</p>
            <p><strong>{{ get_text('gender') }}:</strong> {{ user['gender'] if user['gender'] else get_text('not specified') }}</p>
            <p><strong>{{ get_text('bio') }}:</strong> {{ user['bio'] if user['bio'] else get_text('no bio') }}</p>
            <p><strong>{{ get_text('location') }}:</strong> {{ user['location'] if user['location'] else get_text('no location') }}</p>
        </div>

        <div class="profile-image">
            {% if user['profile_picture'] %}
                {% if user['profile_picture'] in avatars %}
                    <img src="{{ url_for('static', filename='avatars/' + user['profile_picture']) }}" alt="{{ get_text('avatar') }}">
                {% else %}
                    <img src="{{ url_for('static', filename='uploads/' + user['profile_picture']) }}" alt="{{ get_text('uploaded picture') }}">
                {% endif %}
            {% else %}
                <img src="{{ url_for('static', filename='default_profile.png') }}" alt="{{ get_text('default') }}">
            {% endif %}
        </div>

        <a href="{{ url_for('dashboard') }}" class="back-link">
            <button class="action-btn">{{ get_text('back to dashboard') }}</button>
        </a>

        <a href="{{ url_for('logout') }}" class="logout-link">
            <button class="action-btn">{{ get_text('logout') }}</button>
        </a>
    </div>
</div>
{% endblock %}
