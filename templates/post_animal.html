{% extends "base.html" %}

{% block title %}{{ get_text('post_animal') }}{% endblock %}

{% block content %}
<div class="post-job-container">
    <h2>{{ get_text('post_animal') }}</h2>
    <form action="{{ url_for('post_animal') }}" method="POST" enctype="multipart/form-data">
        <label for="animal_category">{{ get_text('select_animal') }}</label>
        <select id="animal_category" name="animal_category" onchange="toggleCustomAnimalInput(this)" required>
            <option value="">{{ get_text('choose animal category') }}</option>
            <option value="cows">{{ get_text('cows') }}</option>
            <option value="buffaloes">{{ get_text('buffaloes') }}</option>
            <option value="goats">{{ get_text('goats') }}</option>
            <option value="sheep">{{ get_text('sheep') }}</option>
            <option value="poultry">{{ get_text('poultry') }}</option>
            <option value="horses">{{ get_text('horses') }}</option>
            <option value="custom">{{ get_text('other') }}</option>
        </select>

        <input type="text" id="custom_animal_input" name="custom_animal" 
               style="display: none;" placeholder="{{ get_text('enter animal type') }}">

        <label for="animal_age">{{ get_text('age') }} ({{ get_text('optional') }})</label>
        <input type="number" id="animal_age" name="animal_age" min="0" max="100">

        <label for="animal_breed">{{ get_text('breed') }} ({{ get_text('optional') }})</label>
        <input type="text" id="animal_breed" name="animal_breed">

        <label for="animal_weight">{{ get_text('weight') }} (kg)*</label>
        <input type="number" id="animal_weight" name="animal_weight" required>

        <label for="animal_cost">{{ get_text('price') }}*</label>
        <input type="number" id="animal_cost" name="animal_cost" required>

        <label for="animal_description">{{ get_text('description') }}</label>
        <textarea id="animal_description" name="animal_description" rows="4"></textarea>

        <label for="animal_location">{{ get_text('location') }}*</label>
        <input type="text" id="animal_location" name="animal_location" required>

        <label for="animal_photos">{{ get_text('photos') }}*</label>
        <input type="file" id="animal_photos" name="animal_photos" 
               multiple accept="image/*" required>

        <label for="contact_number">{{ get_text('contact number') }}*</label>
        <div class="phone-input-container">
            <span class="phone-prefix">+91</span>
            <input type="tel" id="contact_number" name="contact_number"
                   pattern="[0-9]{10}" maxlength="10" minlength="10"
                   oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                   placeholder="{{ get_text('enter_phone') }}" required>
        </div>

        <button type="submit">{{ get_text('submit') }}</button>
    </form>

    <a href="{{ url_for('dashboard') }}" class="back-link">
        ‚Üê {{ get_text('back_to_dashboard') }}
    </a>
</div>

<script>
function toggleCustomAnimalInput(selectElement) {
    const customInput = document.getElementById('custom_animal_input');
    customInput.style.display = selectElement.value === 'custom' ? 'block' : 'none';
    if (selectElement.value === 'custom') {
        customInput.setAttribute('required', '');
    } else {
        customInput.removeAttribute('required');
    }
}
</script>
{% endblock %}
